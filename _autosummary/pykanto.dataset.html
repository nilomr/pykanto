
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>pykanto.dataset &#8212; pykanto 0.1 documentation</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet">
  <link href="../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-book-theme.css?digest=84ace793992934648b4de8eed757e5a2" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.9d8b4a8b9bb19db25eeaddc40d639ba2.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="pykanto.labelapp" href="pykanto.labelapp.html" />
    <link rel="prev" title="pykanto.parameters" href="pykanto.parameters.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<div class="col-12 col-md-3 bd-sidebar site-navigation " id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/pykanto-logo-grey-04.svg" class="logo" alt="logo">
      
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  User guides
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../contents/1_getting-started.html">
   Installing
   <code class="docutils literal notranslate">
    <span class="pre">
     pykanto
    </span>
   </code>
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../contents/2_paths-and-dirs.html">
   Working with paths and directories
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../contents/3_basic-workflow.html">
   Basic workflow
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../contents/intro.html">
   IDE example
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../contents/dataset.html">
   Creating a SongDataset object
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../contents/hpc.html">
   High Performance Computing
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../contents/segmentation.html">
   Vocalisation segmentation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../contents/analysis.html">
   Vocalisation analysis
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../contents/FAQs.html">
   FAQs
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  API reference
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="pykanto.signal.html">
   pykanto.signal
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="pykanto.signal.analysis.html">
     pykanto.signal.analysis
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="pykanto.signal.cluster.html">
     pykanto.signal.cluster
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="pykanto.signal.filter.html">
     pykanto.signal.filter
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="pykanto.signal.segment.html">
     pykanto.signal.segment
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="pykanto.signal.spectrogram.html">
     pykanto.signal.spectrogram
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="pykanto.parameters.html">
   pykanto.parameters
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   pykanto.dataset
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="pykanto.labelapp.html">
   pykanto.labelapp
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="pykanto.labelapp.data.html">
     pykanto.labelapp.data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="pykanto.labelapp.main.html">
     pykanto.labelapp.main
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="pykanto.utils.html">
   pykanto.utils
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="pykanto.utils.compute.html">
     pykanto.utils.compute
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="pykanto.utils.custom.html">
     pykanto.utils.custom
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="pykanto.utils.paths.html">
     pykanto.utils.paths
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="pykanto.utils.read.html">
     pykanto.utils.read
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="pykanto.utils.types.html">
     pykanto.utils.types
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="pykanto.utils.write.html">
     pykanto.utils.write
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="pykanto.utils.xenocanto.html">
     pykanto.utils.xenocanto
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="pykanto.plot.html">
   pykanto.plot
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

</div>


          


          
<!-- This is an invisible pixel that we watch to see if we've scrolled. -->
<div class="sbt-scroll-pixel-helper"></div>
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            <div class="topbar-left">
                
                <label class="nav-toggle-button" for="__navigation">
                    <div class="visually-hidden">Toggle navigation</div>
                    <i class="fas fa-bars"></i>
                </label>
                
            </div>
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/_autosummary/pykanto.dataset.rst.txt"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.rst</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/nilomr/pykanto"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>pykanto.dataset</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="section" id="module-pykanto.dataset">
<span id="pykanto-dataset"></span><h1>pykanto.dataset<a class="headerlink" href="#module-pykanto.dataset" title="Permalink to this headline">¶</a></h1>
<p>Build the main dataset class and its methods to visualise, segment and label
animal vocalisations.</p>
<p class="rubric">Classes</p>
<table class="longtable table autosummary">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pykanto.dataset.SongDataset" title="pykanto.dataset.SongDataset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SongDataset</span></code></a>(DATASET_ID, DIRS[, parameters, ...])</p></td>
<td><p>Main dataset class.</p></td>
</tr>
</tbody>
</table>
<dl class="py class">
<dt class="sig sig-object py" id="pykanto.dataset.SongDataset">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pykanto.dataset.</span></span><span class="sig-name descname"><span class="pre">SongDataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">DATASET_ID</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">DIRS</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="pykanto.utils.paths.html#pykanto.utils.paths.ProjDirs" title="pykanto.utils.paths.ProjDirs"><span class="pre">ProjDirs</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameters</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">None</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="pykanto.parameters.html#pykanto.parameters.Parameters" title="pykanto.parameters.Parameters"><span class="pre">Parameters</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random_subset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">None</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite_dataset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite_data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pykanto/dataset.html#SongDataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pykanto.dataset.SongDataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Main dataset class. See __init__ documentation.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pykanto.dataset.SongDataset.DIRS">
<span class="sig-name descname"><span class="pre">DIRS</span></span><a class="headerlink" href="#pykanto.dataset.SongDataset.DIRS" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="pykanto.utils.paths.html#pykanto.utils.paths.ProjDirs" title="pykanto.utils.paths.ProjDirs"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProjDirs</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pykanto.dataset.SongDataset.vocalisations">
<span class="sig-name descname"><span class="pre">vocalisations</span></span><a class="headerlink" href="#pykanto.dataset.SongDataset.vocalisations" title="Permalink to this definition">¶</a></dt>
<dd><p>Placeholder</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pykanto.dataset.SongDataset.noise">
<span class="sig-name descname"><span class="pre">noise</span></span><a class="headerlink" href="#pykanto.dataset.SongDataset.noise" title="Permalink to this definition">¶</a></dt>
<dd><p>Placeholder</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pykanto.dataset.SongDataset.units">
<span class="sig-name descname"><span class="pre">units</span></span><a class="headerlink" href="#pykanto.dataset.SongDataset.units" title="Permalink to this definition">¶</a></dt>
<dd><p>Placeholder</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pykanto.dataset.SongDataset.parameters">
<span class="sig-name descname"><span class="pre">parameters</span></span><a class="headerlink" href="#pykanto.dataset.SongDataset.parameters" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="pykanto.parameters.html#pykanto.parameters.Parameters" title="pykanto.parameters.Parameters"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parameters</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pykanto.dataset.SongDataset.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">DATASET_ID</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">DIRS</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="pykanto.utils.paths.html#pykanto.utils.paths.ProjDirs" title="pykanto.utils.paths.ProjDirs"><span class="pre">ProjDirs</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameters</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">None</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="pykanto.parameters.html#pykanto.parameters.Parameters" title="pykanto.parameters.Parameters"><span class="pre">Parameters</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random_subset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">None</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite_dataset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite_data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/pykanto/dataset.html#SongDataset.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pykanto.dataset.SongDataset.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Instantiates the main dataset class.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If your dataset contains noise samples (useful when training a
neural network), these should be labelled as ‘NOISE’ in the
corresponding json file.
I.e., <code class="xref py py-obj docutils literal notranslate"><span class="pre">json_file[&quot;label&quot;]</span> <span class="pre">==</span> <span class="pre">'NOISE'</span></code>.
Files where <code class="xref py py-obj docutils literal notranslate"><span class="pre">json_file[&quot;label&quot;]</span> <span class="pre">==</span> <span class="pre">[]</span></code> or “label” is not a key
will be automatically given the label ‘VOCALISATION’.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>DATASET_ID</strong> (<em>str</em>) – Name of new dataset.</p></li>
<li><p><strong>DIRS</strong> (<a class="reference internal" href="pykanto.utils.paths.html#pykanto.utils.paths.ProjDirs" title="pykanto.utils.paths.ProjDirs"><em>ProjDirs</em></a>) – Project directory structure. Must contain
a ‘SEGMENTED’ attribute pointing to a directory that contains
the segmented data organised in two folders: ‘WAV’ and
‘JSON’ for audio and metadata, respectively.</p></li>
<li><p><strong>parameters</strong> (<a class="reference internal" href="pykanto.parameters.html#pykanto.parameters.Parameters" title="pykanto.parameters.Parameters"><em>Parameters</em></a><em>, </em><em>optional</em>) – Parameters for dataset.
Defaults to None. See <a class="reference internal" href="pykanto.parameters.html#pykanto.parameters.Parameters" title="pykanto.parameters.Parameters"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parameters</span></code></a>.</p></li>
<li><p><strong>random_subset</strong> (<em>None</em><em>, </em><em>optional</em>) – Size of random subset for
testing. Defaults to None.</p></li>
<li><p><strong>overwrite_dataset</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to overwrite dataset if
it already exists. Defaults to False.</p></li>
<li><p><strong>overwrite_data</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to overwrite spectrogram
files if they already exist. Defaults to False.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>FileExistsError</strong> – DATASET_ID already exists. You can overwrite it
    by setting <code class="xref py py-obj docutils literal notranslate"><span class="pre">overwrite_dataset=True</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pykanto.dataset.SongDataset._get_wav_json_filedirs">
<span class="sig-name descname"><span class="pre">_get_wav_json_filedirs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">random_subset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">None</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/pykanto/dataset.html#SongDataset._get_wav_json_filedirs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pykanto.dataset.SongDataset._get_wav_json_filedirs" title="Permalink to this definition">¶</a></dt>
<dd><p>Get paths of wav and json files for this dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>random_subset</strong> (<em>int</em><em>, </em><em>optional</em>) – Get a random subset without
repetition. Defaults to None.</p>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Will drop any .wav for which there is no .json!</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pykanto.dataset.SongDataset._load_metadata">
<span class="sig-name descname"><span class="pre">_load_metadata</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/pykanto/dataset.html#SongDataset._load_metadata"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pykanto.dataset.SongDataset._load_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads json metadata in sequence if there are &lt; 100 items, in parallel
chunks of length chunk_len if there are &gt; 1000 items.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pykanto.dataset.SongDataset._get_unique_ids">
<span class="sig-name descname"><span class="pre">_get_unique_ids</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/pykanto/dataset.html#SongDataset._get_unique_ids"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pykanto.dataset.SongDataset._get_unique_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a ‘unique_ID’ attribute holding an array with unique IDs in the
dataset.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pykanto.dataset.SongDataset._get_sound_info">
<span class="sig-name descname"><span class="pre">_get_sound_info</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/pykanto/dataset.html#SongDataset._get_sound_info"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pykanto.dataset.SongDataset._get_sound_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds pandas DataFrames with vocalisation and noise information to
dataset (‘vocs’ and ‘noise’ attributes, respectively). Also
adds information about mim/max bounding box frequencies and durations in
the dataset (‘minmax_values’ attribute), and unit onsets/offsets if
present.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Removes onset/offset pairs which (under current spectrogram
parameter combinations) would result in a unit of length zero.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pykanto.dataset.SongDataset._compute_melspectrograms">
<span class="sig-name descname"><span class="pre">_compute_melspectrograms</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">overwrite_data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/pykanto/dataset.html#SongDataset._compute_melspectrograms"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pykanto.dataset.SongDataset._compute_melspectrograms" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute melspectrograms and add their location to the SongDataset object.
It applies both dereverberation and bandpasses vocalisation data by
default, and neither of these to noise data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>overwrite_data</strong> (<em>bool</em>) – Whether to overwrite any spectrogram files</p></li>
<li><p><strong>dataset.</strong> (<em>that already exist for this</em>) – </p></li>
<li><p><strong>**kwargs</strong> – Passed to
<a class="reference internal" href="pykanto.signal.spectrogram.html#pykanto.signal.spectrogram.save_melspectrogram" title="pykanto.signal.spectrogram.save_melspectrogram"><code class="xref py py-func docutils literal notranslate"><span class="pre">save_melspectrogram()</span></code></a>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pykanto.dataset.SongDataset.summary_plot">
<span class="sig-name descname"><span class="pre">summary_plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nbins</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">variable</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'frequency'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/pykanto/dataset.html#SongDataset.summary_plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pykanto.dataset.SongDataset.summary_plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Plots a histogram + kernel densiyy estimate of the frequency
distribution of vocalisation duration and frequencies.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Durations and frequencies come from bounding boxes,
not vocalisations. This function, along with
<code class="xref py py-func docutils literal notranslate"><span class="pre">show_extreme_songs()</span></code>, is useful to spot
any outliers, and to quickly explore the full range of data.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nbins</strong> (<em>int</em><em>, </em><em>optional</em>) – Number of bins in histogram. Defaults to 50.</p></li>
<li><p><strong>variable</strong> (<em>str</em><em>, </em><em>optional</em>) – One of ‘frequency’, ‘duration’,
‘sample_size’, ‘all’. Defaults to ‘frequency’.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – <code class="xref py py-obj docutils literal notranslate"><span class="pre">variable</span></code> must be one of
    [‘frequency’, ‘duration’, ‘sample_size’, ‘all’]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pykanto.dataset.SongDataset.sample_info">
<span class="sig-name descname"><span class="pre">sample_info</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/pykanto/dataset.html#SongDataset.sample_info"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pykanto.dataset.SongDataset.sample_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints the length of the SongDataset and other information.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pykanto.dataset.SongDataset.show_extreme_samples">
<span class="sig-name descname"><span class="pre">show_extreme_samples</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n_songs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'maxfreq'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'descending'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_keys</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/pykanto/dataset.html#SongDataset.show_extreme_samples"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pykanto.dataset.SongDataset.show_extreme_samples" title="Permalink to this definition">¶</a></dt>
<dd><p>Show mel spectrograms for songs at the ends of the time or
frequency distribution.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Durations and frequencies come from bounding boxes, not vocalisations.
This function, along with <code class="xref py py-func docutils literal notranslate"><span class="pre">summary_plot()</span></code>,
is useful to spot any outliers, and to quickly explore the full range of data.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>n_songs</strong> (<em>int</em><em>, </em><em>optional</em>) – Number of songs to return. Defaults to 1.</p></li>
<li><p><strong>query</strong> (<em>str</em><em>, </em><em>optional</em>) – <p>What to query the database for. Defaults to ‘maxfreq’. One of:</p>
<ul>
<li><p>’duration’</p></li>
<li><p>’maxfreq’</p></li>
<li><p>’minfreq’</p></li>
</ul>
</p></li>
<li><p><strong>order</strong> (<em>str</em><em>, </em><em>optional</em>) – <p>Defaults to ‘descending’. One of:</p>
<ul>
<li><p>’ascending’</p></li>
<li><p>’descending’</p></li>
</ul>
</p></li>
<li><p><strong>return_keys</strong> (<em>bool</em><em>, </em><em>optional</em>) – Defaults to ‘False’. Whether to return
the keys of the displayed spectrograms.</p></li>
<li><p><strong>**kwargs</strong> – Keyword arguments to be passed to
<a class="reference internal" href="pykanto.plot.html#pykanto.plot.melspectrogram" title="pykanto.plot.melspectrogram"><code class="xref py py-func docutils literal notranslate"><span class="pre">melspectrogram()</span></code></a></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pykanto.dataset.SongDataset.relabel_noise_segments">
<span class="sig-name descname"><span class="pre">relabel_noise_segments</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keys</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/pykanto/dataset.html#SongDataset.relabel_noise_segments"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pykanto.dataset.SongDataset.relabel_noise_segments" title="Permalink to this definition">¶</a></dt>
<dd><p>Moves entries from the vocalisations subset to the noise subset.
You will be prompted to choose whether to save the dataset to disk.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Changes ‘label’ in the json metadata within the dataset to
‘NOISE’, but does not change the original json file from which
you created the entry.
Make sure you leave a trail when relabelling segments (i.e., do
it programmatically) or else your work will not be fully
reproducible!</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>keys</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) – A list of the segments to move.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">SongDataset</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">keys_to_move</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;ABC.wav&#39;</span><span class="p">,</span><span class="s1">&#39;CBA.wav&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">relabel_segments</span><span class="p">(</span><span class="n">keys_to_move</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pykanto.dataset.SongDataset.segment_into_units">
<span class="sig-name descname"><span class="pre">segment_into_units</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/pykanto/dataset.html#SongDataset.segment_into_units"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pykanto.dataset.SongDataset.segment_into_units" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds segment onsets, offsets, unit and silence durations
to <code class="xref py py-attr docutils literal notranslate"><span class="pre">vocs</span></code>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If segmentation fails for a vocalisation it will be dropped from
the database so that it doesn’t cause trouble downstream.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>overwrite</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to overwrite unit</p></li>
<li><p><strong>False.</strong> (<em>segmentation information if it already exists. Defaults to</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>FileExistsError</strong> – The vocalisations in this dataset have already
    been segmented.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pykanto.dataset.SongDataset.subset">
<span class="sig-name descname"><span class="pre">subset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ids</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_dataset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#pykanto.dataset.SongDataset" title="pykanto.dataset.SongDataset"><span class="pre">SongDataset</span></a></span></span><a class="reference internal" href="../_modules/pykanto/dataset.html#SongDataset.subset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pykanto.dataset.SongDataset.subset" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a new dataset containing a subset of the IDs present
in the original dataset (e.g., different individual birds).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>Existing files common to both datasets
(vocalisation spectrograms, unit spectrograms,
wav files) will not be copied or moved from their
original location.</p></li>
<li><p>Any newly generated files (e.g., by running a function
that saves spectrograms to disk) will be exclusive to
the new dataset.</p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataset</strong> (<em>[</em><em>type</em><em>]</em>) – Source dataset.</p></li>
<li><p><strong>ids</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) – IDs to keep.</p></li>
<li><p><strong>new_dataset</strong> (<em>str</em>) – Name of new dataset.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A subset of the dataset.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#pykanto.dataset.SongDataset" title="pykanto.dataset.SongDataset">SongDataset</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pykanto.dataset.SongDataset.save_to_disk">
<span class="sig-name descname"><span class="pre">save_to_disk</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/pykanto/dataset.html#SongDataset.save_to_disk"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pykanto.dataset.SongDataset.save_to_disk" title="Permalink to this definition">¶</a></dt>
<dd><p>Save dataset to disk.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pykanto.dataset.SongDataset.reload">
<span class="sig-name descname"><span class="pre">reload</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#pykanto.dataset.SongDataset" title="pykanto.dataset.SongDataset"><span class="pre">pykanto.dataset.SongDataset</span></a></span></span><a class="reference internal" href="../_modules/pykanto/dataset.html#SongDataset.reload"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pykanto.dataset.SongDataset.reload" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the current dataset from disk. Remember to assign the output!</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>You will lose any changes that happened after the last time
you saved the dataset to disk.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Last saved version of the dataset.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#pykanto.dataset.SongDataset" title="pykanto.dataset.SongDataset">SongDataset</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">reload</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pykanto.dataset.SongDataset.plot_voc_seg">
<span class="sig-name descname"><span class="pre">plot_voc_seg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/pykanto/dataset.html#SongDataset.plot_voc_seg"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pykanto.dataset.SongDataset.plot_voc_seg" title="Permalink to this definition">¶</a></dt>
<dd><p>Plots a vocalisation and overlays the results
of the segmentation process.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>str</em>) – Vocalisation identificator.</p></li>
<li><p><strong>**kwargs</strong> – Keyword arguments to be passed to
<a class="reference internal" href="pykanto.plot.html#pykanto.plot.melspectrogram" title="pykanto.plot.melspectrogram"><code class="xref py py-func docutils literal notranslate"><span class="pre">melspectrogram()</span></code></a></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pykanto.dataset.SongDataset.get_units">
<span class="sig-name descname"><span class="pre">get_units</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pad</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/pykanto/dataset.html#SongDataset.get_units"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pykanto.dataset.SongDataset.get_units" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates and saves a dictionary containing spectrogram
representations of the units or the average of
the units present in the vocalisations of each individual ID
in the dataset. The dictionary’s location can be found
at <code class="xref py py-obj docutils literal notranslate"><span class="pre">self.DIRS.UNITS</span></code> if <code class="xref py py-obj docutils literal notranslate"><span class="pre">song_level</span> <span class="pre">=</span> <span class="pre">False</span></code>, and
at <code class="xref py py-obj docutils literal notranslate"><span class="pre">self.DIRS.AVG_UNITS</span></code> if <code class="xref py py-obj docutils literal notranslate"><span class="pre">song_level</span> <span class="pre">=</span> <span class="pre">True</span></code> in
<a class="reference internal" href="#pykanto.dataset.SongDataset.parameters" title="pykanto.dataset.SongDataset.parameters"><code class="xref py py-attr docutils literal notranslate"><span class="pre">parameters</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pad</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to pad spectrograms
to the maximum lenght (per ID). Defaults to False.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If <code class="xref py py-obj docutils literal notranslate"><span class="pre">pad</span> <span class="pre">=</span> <span class="pre">True</span></code>, unit spectrograms are padded to the maximum
duration found among units that belong to the same ID,
not the global maximum.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If each of your IDs (grouping factor, such as individual or
population) has lots of data and you are using a machine with very
limited memory resources you will likely run out of it when
executing this funtion in parallel. If this is the case, you can
limit the number of cpus to be used at once by setting the
<code class="xref py py-obj docutils literal notranslate"><span class="pre">num_cpus</span></code> parameter to a smaller number.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pykanto.dataset.SongDataset.cluster_ids">
<span class="sig-name descname"><span class="pre">cluster_ids</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">min_sample</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/pykanto/dataset.html#SongDataset.cluster_ids"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pykanto.dataset.SongDataset.cluster_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Dimensionality reduction using UMAP + unsupervised clustering using
HDBSCAN. This will fail if the sample size for an ID (grouping factor,
such as individual or population) is too small.</p>
<p>Adds cluster membership information and 2D UMAP coordinates to
<code class="xref py py-attr docutils literal notranslate"><span class="pre">vocs</span></code> if <code class="xref py py-obj docutils literal notranslate"><span class="pre">song_level=True</span></code>
in <a class="reference internal" href="#pykanto.dataset.SongDataset.parameters" title="pykanto.dataset.SongDataset.parameters"><code class="xref py py-attr docutils literal notranslate"><span class="pre">parameters</span></code></a>, else to <a class="reference internal" href="#pykanto.dataset.SongDataset.units" title="pykanto.dataset.SongDataset.units"><code class="xref py py-attr docutils literal notranslate"><span class="pre">units</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>min_sample</strong> (<em>int</em>) – Minimum sample size below which an ID will
be skipped. Defaults to 10, but you can reallistically expect
good automatic results above ~100.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pykanto.dataset.SongDataset.prepare_interactive_data">
<span class="sig-name descname"><span class="pre">prepare_interactive_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">spec_length</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/pykanto/dataset.html#SongDataset.prepare_interactive_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pykanto.dataset.SongDataset.prepare_interactive_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare lightweigth representations of each vocalization
or unit (if song_level=False in <a class="reference internal" href="#pykanto.dataset.SongDataset.parameters" title="pykanto.dataset.SongDataset.parameters"><code class="xref py py-attr docutils literal notranslate"><span class="pre">parameters</span></code></a>)
for each individual in the dataset. These are linked from
VOCALISATION_LABELS or UNIT_LABELS in <a class="reference internal" href="#pykanto.dataset.SongDataset.DIRS" title="pykanto.dataset.SongDataset.DIRS"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DIRS</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>spec_length</strong> (<em>float</em><em>, </em><em>optional</em>) – In seconds, duration of</p></li>
<li><p><strong>segments</strong> (<em>spectrogram that will be produced. Shorter</em>) – </p></li>
<li><p><strong>padded</strong> (<em>will be</em>) – </p></li>
<li><p><strong>note</strong> (<em>longer segments trimmed. Defaults to maximum</em>) – </p></li>
<li><p><strong>dataset.</strong> (<em>duration in the</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pykanto.dataset.SongDataset.open_label_app">
<span class="sig-name descname"><span class="pre">open_label_app</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">palette</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">('#8dd3c7',</span> <span class="pre">'#ffffb3',</span> <span class="pre">'#bebada',</span> <span class="pre">'#fb8072',</span> <span class="pre">'#80b1d3',</span> <span class="pre">'#fdb462',</span> <span class="pre">'#b3de69',</span> <span class="pre">'#fccde5',</span> <span class="pre">'#d9d9d9',</span> <span class="pre">'#bc80bd',</span> <span class="pre">'#ccebc5',</span> <span class="pre">'#ffed6f')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_n_labs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/pykanto/dataset.html#SongDataset.open_label_app"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pykanto.dataset.SongDataset.open_label_app" title="Permalink to this definition">¶</a></dt>
<dd><p>Opens a new web browser tab with an interactive app that can be used to
check the accuracy of the automaticaly assigned labels. Uses average
units per vocalisation (if song_level=True in self.parameters) or
individual units.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Starting this app requires the output of
<a class="reference internal" href="#pykanto.dataset.SongDataset.prepare_interactive_data" title="pykanto.dataset.SongDataset.prepare_interactive_data"><code class="xref py py-func docutils literal notranslate"><span class="pre">prepare_interactive_data()</span></code></a>; you will
be prompted to choose whether to run it if it is missing.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The app will try to create a palette based on the maximum number
of categories in any individual in the dataset. You will get
a ValueError if the palette you provided is not large enough
(the default palette allows for a maximum of 12 categories).
You can use your own palettes or import existing ones,
see ‘Examples’ below.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>palette</strong> (<em>List</em><em>[</em><em>str</em><em>]</em><em>, </em><em>optional</em>) – A colour palette of
length &gt;= max_n_labs. Defaults to list(Set3_12).</p></li>
<li><p><strong>max_n_labs</strong> (<em>int</em><em>, </em><em>optional</em>) – maximum number of classes expected in
the dataset. Defaults to 10.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Allow for a maximum of 20 labels by setting <code class="docutils literal notranslate"><span class="pre">max_n_labs</span> <span class="pre">=</span> <span class="pre">20</span></code> and
<code class="docutils literal notranslate"><span class="pre">palette</span> <span class="pre">=</span> <span class="pre">list(Category20_20)</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">bokeh.palettes</span> <span class="kn">import</span> <span class="n">Category20_20</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="bp">self</span><span class="o">.</span><span class="n">open_label_app</span><span class="p">(</span><span class="n">max_n_labs</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">palette</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">Category20_20</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>


              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="pykanto.parameters.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">pykanto.parameters</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="pykanto.labelapp.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">pykanto.labelapp</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            
        </div>
    </div>
    <footer>
    

    <hr/>

        <div role="contentinfo">
            <p> 
                &copy;  2021, Nilo M. Recalde

            </p>
        </div>    
        Using
        <a
        href="https://www.sphinx-doc.org/">Sphinx</a> //  theme  
        modified from <a href="https://executablebooks.org/en/latest/">The
        Executable Book Project</a>.

    </footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>